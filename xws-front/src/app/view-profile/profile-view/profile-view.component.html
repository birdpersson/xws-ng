<div class = "container">
  <div *ngIf="logged"> 
    <mat-card class="card">
        <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>{{user.username}}</mat-card-title> 
            
            <div *ngIf="!myPage.follow; else drugo ">

                <div *ngIf="following.follow; else elseBl">
                  <button mat-raised-button class="button1" color="primary">Following</button>
                  <button mat-raised-button class="button1" (click)="settings(user.username)" color="primary">Settings</button>
                </div> 
                <div class= "center"><ng-template #elseBl >
                  <div *ngIf="request.follow; else elseBlo">
                    <button mat-raised-button class="button1" color="primary" disabled>Follow request sent</button>
                  </div> 
                <div class= "center"><ng-template #elseBlo >       
                  <button mat-raised-button class="button1" (click)="follow(user.username)" color="primary">Follow</button>
                </ng-template></div>
                </ng-template></div>
                <button mat-raised-button class="button2"  color="primary"><a  href="#" [routerLink]="['report']" style="text-decoration:none; color: white;" >Report</a></button>
            </div>
            <div class= "center"><ng-template #drugo >
              <button mat-raised-button class="button1" routerLink="/user/post" color="primary">Upload</button>
              
            </ng-template></div>
      <!--   <button mat-raised-button class="button1"  color="primary">Report</button> -->  
          
        <!--<button mat-raised-button disabled>Following</button>
            <button mat-raised-button disabled>Requested</button> -->
        </mat-card-header>
        <div class= "center">biografija</div>
        <br>
        <mat-divider></mat-divider>
        <br>
        <!--<div class= "center"><b>This profile is private</b></div>
        <div class= "center">Follow to see their photos and videos.</div> -->

        <div *ngIf="(checkPrivacy() && !following.follow && !myPage.follow); else elseB">
          <div class= "center"><b>This profile is private</b></div>
          <div class= "center">Follow to see their photos and videos.</div>
        </div>

        <div><ng-template #elseB >
          <div *ngIf="post.length>0; else elseBlock">
            <div class="post" *ngFor="let posts of post">
              <a href="#" [routerLink]="['post-page', posts.id]" style="text-decoration:none">
              <mat-card class="card1">
                  <mat-card-header>
                      <div mat-card-avatar class="example-header-image"></div>
                      <mat-card-title>{{posts.username}}</mat-card-title>
                      <mat-card-subtitle *ngIf="posts.hashtags.length > 0"><span *ngFor="let tag of posts.hashtags">#{{tag}}&nbsp;</span><br></mat-card-subtitle>
                      <mat-card-subtitle *ngIf="posts.postType==='post'">{{posts.postType | uppercase}}</mat-card-subtitle>
                      <mat-card-subtitle *ngIf="posts.postType==='story'">{{posts.postType | uppercase}}</mat-card-subtitle>
                      <mat-card-subtitle>{{posts.location}}</mat-card-subtitle>
                    </mat-card-header>
                    <img *ngIf="posts.mediaUrls[0].endsWith('.png') || posts.mediaUrls[0].endsWith('.jpg')" mat-card-image  src="{{posts.mediaUrls[0]}}" alt="Photo of a Shiba Inu">
      
                    <video crossorigin="anonymous" *ngIf="posts.mediaUrls[0].endsWith('.mp4')" width="500" height="500" controls>
                      <source src="{{posts.mediaUrls[0]}}" type="video/mp4">
                      
                    Your browser does not support the video tag.
                    </video>
                    <mat-card-content>
                      <p>
                        {{posts.caption}}
                      </p>
                      
                    </mat-card-content>
                    <mat-card-actions>
                      <!-- {{posts.likes.length}}
                      <button mat-raised-button color="primary">Like</button>
                      <button mat-raised-button>Comment</button> -->
                    </mat-card-actions>
                    <mat-divider></mat-divider>
                    <br>
                    <div class="date">{{posts.created |  date: 'dd/MM/yyyy hh:mm'}}</div>
              </mat-card>
            </a>
              <br>
            </div>
        </div>
        <div class= "center"><ng-template #elseBlock ><div class="center">User has no photos</div></ng-template></div>
        </ng-template></div>
    </mat-card>
  <!--</div> -->

    
  </div>
  <div *ngIf="!logged"> 
    <mat-card class="card">
        <mat-card-header>
            <div mat-card-avatar class="example-header-image"></div>
            <mat-card-title>{{user.username}}</mat-card-title> 
            
           
          
        
        </mat-card-header>
        <div class= "center">biografija</div>
        <br>
        <mat-divider></mat-divider>
        <br>

        
          <div *ngIf="post.length>0; else elseBlock">
            <div  class="post" *ngFor="let posts of post">
              <mat-card class="card1">
                  <mat-card-header>
                      <div mat-card-avatar class="example-header-image"></div>
                      <mat-card-title>{{posts.username}}</mat-card-title>
                      <mat-card-subtitle *ngIf="posts.hashtags.length > 0"><span *ngFor="let tag of posts.hashtags">#{{tag}}&nbsp;</span><br></mat-card-subtitle>
                      <mat-card-subtitle *ngIf="posts.postType==='post'">{{posts.postType | uppercase}}</mat-card-subtitle>
                      <mat-card-subtitle *ngIf="posts.postType==='story'">{{posts.postType | uppercase}}</mat-card-subtitle>
                      <mat-card-subtitle>{{posts.location}}</mat-card-subtitle>
                    </mat-card-header>
                    <img *ngIf="posts.mediaUrls[0].endsWith('.png') || posts.mediaUrls[0].endsWith('.jpg')" mat-card-image  src="{{posts.mediaUrls[0]}}" alt="Photo of a Shiba Inu">
      
                    <video crossorigin="anonymous" *ngIf="posts.mediaUrls[0].endsWith('.mp4')" width="500" height="500" controls>
                      <source src="{{posts.mediaUrls[0]}}" type="video/mp4">
                      
                    Your browser does not support the video tag.
                    </video>
                    <mat-card-content>
                      <p>
                        {{posts.caption}}
                      </p>
                      
                    </mat-card-content>
                    <mat-card-actions>
                      <!-- {{posts.likes.length}} -->
                      <!-- <button mat-raised-button color="primary">Like</button>
                      <button mat-raised-button>Comment</button> -->
                    </mat-card-actions>
                    <mat-divider></mat-divider>
                    <br>
                    <div class="date">{{posts.created |  date: 'dd/MM/yyyy hh:mm'}}</div>
              </mat-card>
              <br>
            </div>
        </div>
        <div class= "center"><ng-template #elseBlock ><div class="center">You have no photos</div></ng-template></div>
    </mat-card>
  <!--</div> -->

    
  </div>
  
</div>    